{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-02-09-product-list-class/","result":{"data":{"site":{"siteMetadata":{"title":"Ten's Thoughts","author":"Ten Zhi Yang"}},"markdownRemark":{"id":"63e61f27-ed7d-57e0-b822-680a0fb8139a","excerpt":"I decided since I’ve been solving the interview questions on Cassidy’s weekly newsletter I might as well put a little bit more effort into writing my thought…","html":"<p>I decided since I’ve been solving the interview questions on <a href=\"https://twitter.com/cassidoo\">Cassidy’s</a> weekly <a href=\"https://buttondown.email/cassidoo/archive/cc677716-37b2-4cfd-a691-bc6e87d7abce\">newsletter</a> I might as well put a little bit more effort into writing my thought processes down, in the scenario where people are looking for a way to solve these. That’s my goal for this year. I’m not confident I can be consistent, but it doesn’t hurt to try!</p>\n<p><strong>This may or may not be the optimal solution, DO NOT blindly memorize my solutions</strong></p>\n<p>Target audience: beginners in js (please feedback!)</p>\n<blockquote>\n<p>This week’s question:\nImplement a ProductList class that has two methods, add(n) (which pushes the value n to the back of the list) and product(m) (which returns the product of the last m numbers in the list). David made an awesome template for submitting your solutions, if you’d like to use it!</p>\n</blockquote>\n<blockquote>\n<p>Usage:</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ProductList p = new ProductList();\np.add(7);         // [7]\np.add(0);         // [7,0]\np.add(2);         // [7,0,2]\np.add(5);         // [7,0,2,5]\np.add(4);         // [7,0,2,5,4]\np.product(3);     // return 40 because 2 * 5 * 4</code></pre></div>\n<p>As someone who’s been writing nothing but JS for a while, the first thing that comes to mind is to make use of <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\">lexical scope</a> of JS functions to store the array. I can’t say I’m super familiar with the Scope and Closure terminologies, but I’m fairly aware of what they do and how to make use of them.</p>\n<p>so let’s create a list in a function.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function ProductList() {\n  this.list = [];\n}</code></pre></div>\n<p>So to look at what’s happening with the array, we can write some driver code</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let p = new ProductList();\nlet p2 = new ProductList();\nconsole.log(p.list, p2.list); // [] []\np.list.push(1);\np.list.push(2);\nconsole.log(p.list, p2.list); // [1, 2] []</code></pre></div>\n<p>so far so good, we know that using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new\">new operator</a> essentially creates an object with the <code class=\"language-text\">this</code> context from the function.  </p>\n<p>The next step we want to do is to add elements to the list from a function provided by ProductList instead of using the one from the array. We will return this function in a JSON object, as well as the list array (if not the list will be undefined, see link to new operator above)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function ProductList() {\n  this.list = [];\n\n  function add(num) {\n    this.list.push(num);\n  }\n  return { add, list: this.list };\n}</code></pre></div>\n<p>If we change the <code class=\"language-text\">p.list.push(1)</code> in the driver code above to <code class=\"language-text\">p.add(1)</code> we should have the same result.</p>\n<p>Finally we need a product function to multiply all the elements in the list. We want the last <code class=\"language-text\">n</code> numbers, so we can have a for loop that increments up to <code class=\"language-text\">n</code> and create an index that starts from the back and gets smaller up till <code class=\"language-text\">n</code>. Plugging in the given driver code, we should get the correct solution.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function ProductList() {\n  this.list = [];\n\n  function add(num) {\n    this.list.push(num);\n  }\n\n  function product(n) {\n    let result = null;\n    for (let i = 0; i &lt; n; i++) {\n      const index = this.list.length - 1 - i;\n      if (result === null) {\n        result = this.list[index];\n      } else {\n        result *= this.list[index];\n      }\n    }\n    return result;\n  }\n  return { add, list: this.list, product };\n}\n\nlet p = new ProductList();\n\np.add(7); // [7]\np.add(0); // [7,0]\np.add(2); // [7,0,2]\np.add(5); // [7,0,2,5]\np.add(4); // [7,0,2,5,4]\nconsole.log(p.product(3)); // return 40 because 2 * 5 * 4</code></pre></div>\n<h2>Bonus: O(1) product but with O(n) add</h2>\n<p>This sprang to mind as an optimization upon deeper thinking it doesn’t really work, as it makes the add function slower. </p>\n<p>If we look at the problem, we realise there’s no need to remove items from the list, therefore there’s no need to keep the original values. How about calculating the product on insertion and then returning the results directly?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function ProductList() {\n  this.list = [];\n\n  function add(num) {\n    for (let i = 0; i &lt; this.list.length; i++) {\n      this.list[i] *= num;\n    }\n    this.list.push(num);\n  }\n\n  function product(n) {\n    let index = this.list.length - n;\n    return this.list[index];\n  }\n  return { add, list: this.list, product };\n}</code></pre></div>\n<h2>codepen:</h2>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"cassidoo newsletter 2021/6\" src=\"https://codepen.io/Tzyinc/embed/bGBeMmW?height=296&theme-id=dark&default-tab=js\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/Tzyinc/pen/bGBeMmW'>cassidoo newsletter 2021/6</a> by Ten Zhi Yang\n  (<a href='https://codepen.io/Tzyinc'>@Tzyinc</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>","frontmatter":{"title":"Weekly solutions: product list class","date":"February 09, 2021"}}},"pageContext":{"slug":"/2021-02-09-product-list-class/","previous":{"fields":{"slug":"/2020-10-13-ways-to-play-sound/"},"frontmatter":{"title":"Ways to play sound on browser"}},"next":{"fields":{"slug":"/2021-02-10-blog-auto-post/"},"frontmatter":{"title":"Hacking together auto posting to dev.to from my blog"}}}},"staticQueryHashes":["426816048","444714259"]}